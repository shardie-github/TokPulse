
> @tokpulse/experiments@0.0.0 test /workspace/packages/experiments
> vitest


 DEV  v1.6.1 /workspace/packages/experiments

 ❯ src/vanilla.test.ts  (9 tests | 1 failed) 61ms
   ❯ src/vanilla.test.ts > Global functions > should throw error when accessing uninitialized global client
     → expected [Function] to throw an error
stderr | src/vanilla.test.ts > VanillaExperimentClient > should handle assignment errors gracefully
Failed to get experiment assignment: Error: Network error
    at /workspace/packages/experiments/src/vanilla.test.ts:48:65
    at runTest (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:781:11)
    at runSuite (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:967:3)
    at file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7
    at withEnv (file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:83:5)
    at run (file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:105:3)
    at runBaseTests (file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/vendor/base.Ybri3C14.js:30:3)

stderr | src/vanilla.test.ts > VanillaExperimentClient > should handle exposure recording errors
Failed to record experiment exposure: Error: Network error
    at /workspace/packages/experiments/src/vanilla.test.ts:71:66
    at runTest (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:781:11)
    at runSuite (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:967:3)
    at file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7
    at withEnv (file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:83:5)
    at run (file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:105:3)
    at runBaseTests (file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/vendor/base.Ybri3C14.js:30:3)


⎯⎯⎯⎯⎯⎯⎯ Failed Tests 1 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/vanilla.test.ts > Global functions > should throw error when accessing uninitialized global client
AssertionError: expected [Function] to throw an error

- Expected: 
null

+ Received: 
undefined

 ❯ src/vanilla.test.ts:114:36
    112| 
    113|   it('should throw error when accessing uninitialized global client', …
    114|     expect(() => getExperiments()).toThrow('Experiments not initialize…
       |                                    ^
    115|   })
    116| })

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯

 Test Files  1 failed (1)
      Tests  1 failed | 8 passed (9)
   Start at  23:27:39
   Duration  1.54s (transform 429ms, setup 0ms, collect 331ms, tests 61ms, environment 0ms, prepare 345ms)


 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
[3Jc
 RERUN  src/vanilla.test.ts x1

 ❯ src/vanilla.test.ts  (9 tests | 1 failed) 20ms
   ❯ src/vanilla.test.ts > Global functions > should throw error when accessing uninitialized global client
     → globalClient is not defined
stderr | src/vanilla.test.ts > VanillaExperimentClient > should handle assignment errors gracefully
Failed to get experiment assignment: Error: Network error
    at /workspace/packages/experiments/src/vanilla.test.ts:48:65
    at runTest (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:781:11)
    at runSuite (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:967:3)
    at file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7
    at withEnv (file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:83:5)
    at run (file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:105:3)
    at runBaseTests (file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/vendor/base.Ybri3C14.js:30:3)

stderr | src/vanilla.test.ts > VanillaExperimentClient > should handle exposure recording errors
Failed to record experiment exposure: Error: Network error
    at /workspace/packages/experiments/src/vanilla.test.ts:71:66
    at runTest (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:781:11)
    at runSuite (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///workspace/node_modules/.pnpm/@vitest+runner@1.6.1/node_modules/@vitest/runner/dist/index.js:967:3)
    at file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7
    at withEnv (file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:83:5)
    at run (file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:105:3)
    at runBaseTests (file:///workspace/node_modules/.pnpm/vitest@1.6.1_@vitest+ui@1.6.1_jsdom@24.1.3/node_modules/vitest/dist/vendor/base.Ybri3C14.js:30:3)


⎯⎯⎯⎯⎯⎯⎯ Failed Tests 1 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/vanilla.test.ts > Global functions > should throw error when accessing uninitialized global client
ReferenceError: globalClient is not defined
 ❯ src/vanilla.test.ts:115:5
    113|   it('should throw error when accessing uninitialized global client', …
    114|     // Reset the global client
    115|     globalClient = null
       |     ^
    116|     expect(() => getExperiments()).toThrow('Experiments not initialize…
    117|   })

 Test Files  1 failed (1)
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯

      Tests  1 failed | 8 passed (9)
   Start at  00:28:30
   Duration  132ms


